#!/usr/bin/env ruby
require 'rbg'

begin
  if index = ARGV.index('-E')
    environment = ARGV[index + 1]
  else
    environment = nil
  end
  Rbg.start(ARGV.first, {:background => ARGV.include?('-D'), :environment => environment})
rescue Rbg::Error => e
  $stderr.puts "!!! #{e.message}"
  Process.exit(1)
end

