#!/usr/bin/env ruby
require 'rbg'

begin
  if index = ARGV.index('-E')
    environment = ARGV[index + 1]
  else
    environment = nil
  end
  if ARGV.empty?
    puts "Usage: " + $0 + " config_file [-D] [-E environment]"
  else
    Rbg.start(ARGV.first, {:background => ARGV.include?('-D'), :environment => environment})
  end
rescue Rbg::Error => e
  $stderr.puts "!!! #{e.message}"
  Process.exit(1)
end

